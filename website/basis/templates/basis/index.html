{% extends 'base.html' %}

{% block content %}

<!-- Посты -->
{% for p in all_posts %}
{% autoescape off %}

<!-- Изображение -->
{% if p.photo %}
<a href='{{p.get_absolute_url}}'>
    <img align="left" src="{{p.photo.url}}" height="175" hspace="30" alt="{{p}}">
</a>
{% else %}
<a href='{{p.get_absolute_url}}'>
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
         fill="currentColor" class="bi bi-card-image" viewBox="0 0 16 16">
        <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
        <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5
        2zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002
        12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5z"/>
    </svg>
</a>
{% endif %}

<!-- Заголовок поста -->
<p>{{p.post_title}}</p>
{% if p.category != None %}
<p>{{p.category}}</p>
{% else %}
<p>Звезда</p>
{% endif %}

<!-- Текст поста с фильтрами -->
<br><p>{{p.post_content|linebreaks|truncatewords:25}}</p>
{% endautoescape %}

<!-- Ссылка на пост -->
<p align="right">
    <a href='{{p.get_absolute_url}}'>
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" viewBox="0 0 16 16">
            <path
                    d="M4 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4m2.625.547a3 3 0 0 0-5.584.953H.5a.5.5 0 0 0 0 1h.541A3 3 0 0 0
                    7 8a1 1 0 0 1 2 0 3 3 0 0 0 5.959.5h.541a.5.5 0 0 0 0-1h-.541a3 3 0 0 0-5.584-.953A1.993 1.993 0 0
                    0 8 6c-.532 0-1.016.208-1.375.547M14 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0"
            />
        </svg>
    </a>
</p>
{% endfor %}

{% endblock %}

<!-- Блок навигации -->
{% block navigation %}

{% if page_obj.has_other_pages %}
{% if page_obj.has_previous %}
<a href="?page={{ page_obj.previous_page_number }}">
    <svg style="padding: 0% 1% 0% 0%" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
         class="bi bi-chevron-left" viewBox="0 0 16 16">
        <path
                fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647
                5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
        />
    </svg>
</a>
{% endif %}

{% for p in paginator.page_range %}
{% if page_obj.number == p %}
<a>{{ p }}</a>
{% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %}
<a href="?page={{ p }}">{{ p }}</a>
{% endif %}
{% endfor %}

{% if page_obj.has_next %}
<a href="?page={{ page_obj.next_page_number }}">
    <svg style="padding: 0% 0% 0% 1%" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
         class="bi bi-chevron-right" viewBox="0 0 16 16">
        <path
                fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1
                0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
        />
    </svg>
</a>
{% endif %}
{% endif %}

{% endblock %}
